# Java反射的小总结

## 类的加载

> 将类的class文件读入内存，并为之创建一个java.lang.Class对象。

类的加载由类加载器完成。

通过不同的类加载器，有以下几种方式加载类：

1. 直接加载class文件
2. 通过jar包加载
3. 通过网络加载
4. 通过java源文件动态编译，并执行加载。

## 类的连接

> 连接阶段负责把类的二进制数据合并到jre中。

1. 验证：验证类是否有正确的内部结构，并和其他类协调一致。
2. 准备：为类的类变量分配内存，并设置默认值。
3. 解析：

## 类的初始化

> 为类变量进行初始化。

#### 类变量初始化方式

1. 声明类变量时直接指定初始化值。
2. 使用静态初始化块

#### 类初始化时机

1. 创建类的实例（new、反射、反序列化）
2. 访问某个类的类方法、类变量
3. 初始化某个类的子类，它的所有父类、祖先类都会被初始化。

*使用`final`修饰的静态变量，如能在编译时确定下来，那么访问改类变量时，不会初始化该所有在类。*

## 类加载器

> 负责把.class文件加载到内存，并生成java.lang.Class对象

